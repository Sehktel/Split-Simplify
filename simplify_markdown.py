#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è markdown –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ–¥ editor.js

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:
- –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∫ —É—Ä–æ–≤–Ω—é 3 (###)
- –£–¥–∞–ª–µ–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–æ–≤ (–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –æ–±—ã—á–Ω—ã–µ —Å–ø–∏—Å–∫–∏)
- –†–∞—Å–∫—Ä—ã—Ç–∏–µ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö –±–ª–æ–∫–æ–≤ <details>/<summary>
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (** –∏ * –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)
- –£–¥–∞–ª–µ–Ω–∏–µ HTML-—Ç–µ–≥–æ–≤
"""

import re
import os
import configparser
from pathlib import Path
from typing import List


class ConfigManager:
    """
    –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ ss.ini —Ñ–∞–π–ª–∞.
    
    –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É—Ç—è–º–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
    –∏ –¥—Ä—É–≥–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–∫—Ä–∏–ø—Ç–∞ —É–ø—Ä–æ—â–µ–Ω–∏—è Markdown —Ñ–∞–π–ª–æ–≤.
    """
    
    def __init__(self, config_file: str = 'ss.ini'):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
        
        Args:
            config_file: –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        """
        self.config_file = Path(config_file)
        self.config = configparser.ConfigParser()
        
    def load_config(self) -> bool:
        """
        –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞.
        
        Returns:
            bool: True –µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ, False –∏–Ω–∞—á–µ
        """
        if not self.config_file.exists():
            print(f"‚ùå –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ {self.config_file} –Ω–µ –Ω–∞–π–¥–µ–Ω!")
            print("   –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª ss.ini —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π")
            return False
            
        try:
            self.config.read(self.config_file, encoding='utf-8')
            return True
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: {e}")
            return False
    
    def get_simplify_directories(self) -> List[tuple]:
        """
        –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–∞—Ä (–∏—Å—Ö–æ–¥–Ω–∞—è_–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, —Ü–µ–ª–µ–≤–∞—è_–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è) –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è.
        
        –ò—â–µ—Ç –ø–∞—Ä—ã —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º '_simplify_source' –∏ '_simplify_target'.
        
        Returns:
            List[tuple]: –°–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–π (source, target)
        """
        if not self.config.has_section('directories'):
            print("‚ùå –°–µ–∫—Ü–∏—è [directories] –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!")
            return []
        
        directories = []
        
        # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –ø–∞—Ä—ã simplify_source-simplify_target –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        for key, value in self.config['directories'].items():
            if key.endswith('_simplify_source'):
                # –ò—â–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é simplify_target –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
                target_key = key.replace('_simplify_source', '_simplify_target')
                if target_key in self.config['directories']:
                    source_path = Path(value)
                    target_path = Path(self.config['directories'][target_key])
                    directories.append((source_path, target_path))
        
        return directories
    
    def get_encoding(self) -> str:
        """
        –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
        
        Returns:
            str: –ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'utf-8')
        """
        if self.config.has_section('settings') and 'encoding' in self.config['settings']:
            return self.config['settings']['encoding']
        return 'utf-8'


def normalize_headers(line: str) -> str:
    """
    –ü—Ä–∏–≤–æ–¥–∏—Ç –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫ —É—Ä–æ–≤–Ω—é 3 (###)
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º —É—Ä–æ–≤–Ω—è 3
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
    header_match = re.match(r'^(#{1,6})\s+(.+)$', line)
    if header_match:
        # –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ 3 —É—Ä–æ–≤–Ω—è
        return f"### {header_match.group(2)}"
    return line


def remove_checklists(line: str) -> str:
    """
    –£–±–∏—Ä–∞–µ—Ç —á–µ–∫-–ª–∏—Å—Ç—ã, –ø—Ä–µ–≤—Ä–∞—â–∞—è –∏—Ö –≤ –æ–±—ã—á–Ω—ã–µ —Å–ø–∏—Å–∫–∏
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É —Å –æ–±—ã—á–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –≤–º–µ—Å—Ç–æ —á–µ–∫-–ª–∏—Å—Ç–∞
    """
    # –£–±–∏—Ä–∞–µ–º —á–µ–∫–±–æ–∫—Å—ã –∏–∑ —Å–ø–∏—Å–∫–æ–≤
    # - [ ] —Ç–µ–∫—Å—Ç -> - —Ç–µ–∫—Å—Ç
    # - [x] —Ç–µ–∫—Å—Ç -> - —Ç–µ–∫—Å—Ç
    line = re.sub(r'^(\s*-)\s*\[([ xX])\]\s*', r'\1 ', line)
    return line


def simplify_mixed_formatting(line: str) -> str:
    """
    –£–ø—Ä–æ—â–∞–µ—Ç —Å–º–µ—à–∞–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–∂–∏—Ä–Ω—ã–π + –∫—É—Ä—Å–∏–≤ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)
    
    –ï—Å–ª–∏ –≤ —Å—Ç—Ä–æ–∫–µ –µ—Å—Ç—å –∏ ** –∏ *, –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤—Å—ë —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç.
    –ü—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–¥–∏–Ω–∞—Ä–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ ** –∏–ª–∏ —Ç–æ–ª—å–∫–æ *)
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –£–ø—Ä–æ—â–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
    # –ï—Å–ª–∏ –µ—Å—Ç—å –∏ –∂–∏—Ä–Ω—ã–π (**) –∏ –∫—É—Ä—Å–∏–≤ (*), —É–¥–∞–ª—è–µ–º –≤—Å—ë —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    has_bold = bool(re.search(r'\*\*[^*]+\*\*', line))
    has_italic = bool(re.search(r'(?<!\*)\*(?!\*)([^*]+)\*(?!\*)', line))
    
    if has_bold and has_italic:
        # –£–±–∏—Ä–∞–µ–º –≤—Å—ë —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        # –°–Ω–∞—á–∞–ª–∞ –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
        line = re.sub(r'\*\*([^*]+)\*\*', r'\1', line)
        # –ü–æ—Ç–æ–º –∫—É—Ä—Å–∏–≤
        line = re.sub(r'(?<!\*)\*(?!\*)([^*]+)\*(?!\*)', r'\1', line)
    
    return line


def fix_bold_colon_in_lists(line: str) -> str:
    """
    –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å editor.js: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è "- **–¢–µ–∫—Å—Ç:** –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ"
    
    Editor.js —Ç–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ –¥–≤–æ–µ—Ç–æ—á–∏—è –≤ —Å–ø–∏—Å–∫–∞—Ö —Å –∂–∏—Ä–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º.
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º "- **–¢–µ–∫—Å—Ç:** –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ" –≤ "- –¢–µ–∫—Å—Ç: –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ"
    
    –í–ê–ñ–ù–û: –î–≤–æ–µ—Ç–æ—á–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –í–ù–£–¢–†–ò –∏–ª–∏ –°–ù–ê–†–£–ñ–ò –∂–∏—Ä–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞:
    - "- **FUNCTION:** —Ç–µ–∫—Å—Ç" ‚Üí –¥–≤–æ–µ—Ç–æ—á–∏–µ –≤–Ω—É—Ç—Ä–∏ **
    - "- **FUNCTION**: —Ç–µ–∫—Å—Ç" ‚Üí –¥–≤–æ–µ—Ç–æ—á–∏–µ —Å–Ω–∞—Ä—É–∂–∏ **
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
    """
    # –ü–∞—Ç—Ç–µ—Ä–Ω 1: –¥–≤–æ–µ—Ç–æ—á–∏–µ –í–ù–£–¢–†–ò ** (—Å–∞–º—ã–π —á–∞—Å—Ç—ã–π —Å–ª—É—á–∞–π)
    # –ü—Ä–∏–º–µ—Ä: "- **FUNCTION:** –í—ã—á–∏—Å–ª–µ–Ω–∏—è..." –∏–ª–∏ "1. **FUNCTION:** –í—ã—á–∏—Å–ª–µ–Ω–∏—è..."
    pattern1 = r'^(\s*(?:-|\d+\.)\s+)\*\*([^*]+):\*\*\s*(.+)$'
    
    # –ü–∞—Ç—Ç–µ—Ä–Ω 2: –¥–≤–æ–µ—Ç–æ—á–∏–µ –°–ù–ê–†–£–ñ–ò **
    # –ü—Ä–∏–º–µ—Ä: "- **FUNCTION**: –í—ã—á–∏—Å–ª–µ–Ω–∏—è..." –∏–ª–∏ "1. **FUNCTION**: –í—ã—á–∏—Å–ª–µ–Ω–∏—è..."
    pattern2 = r'^(\s*(?:-|\d+\.)\s+)\*\*([^*]+)\*\*:\s*(.+)$'
    
    if re.match(pattern1, line):
        # –£–±–∏—Ä–∞–µ–º ** –∏ –æ—Å—Ç–∞–≤–ª—è–µ–º –¥–≤–æ–µ—Ç–æ—á–∏–µ
        line = re.sub(pattern1, r'\1\2: \3', line)
    elif re.match(pattern2, line):
        # –£–±–∏—Ä–∞–µ–º ** –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–≤–æ–µ—Ç–æ—á–∏–µ
        line = re.sub(pattern2, r'\1\2: \3', line)
    
    return line


def fix_code_with_dash_in_lists(line: str) -> str:
    """
    –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å editor.js: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è "- `–∫–æ–¥` ‚Äî –ø–æ—è—Å–Ω–µ–Ω–∏–µ"
    
    Editor.js —Ç–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ backticks (–æ–±—Ä–∞—Ç–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫) —Å —Ç–∏—Ä–µ.
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º "- `RAISE NOTICE` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" –≤ "- RAISE NOTICE ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
    
    –¢–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å –¥–≤–æ–µ—Ç–æ—á–∏–µ–º:
    - "- `–∫–æ–¥` ‚Äî –ø–æ—è—Å–Ω–µ–Ω–∏–µ"
    - "- `–∫–æ–¥` : –ø–æ—è—Å–Ω–µ–Ω–∏–µ"
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
    """
    # –ü–∞—Ç—Ç–µ—Ä–Ω 1: —Å –¥–ª–∏–Ω–Ω—ã–º —Ç–∏—Ä–µ (‚Äî)
    # –ü—Ä–∏–º–µ—Ä: "- `RAISE NOTICE` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" –∏–ª–∏ "1. `RAISE NOTICE` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
    pattern_dash = r'^(\s*(?:-|\d+\.)\s+)`([^`]+)`\s*‚Äî\s*(.+)$'
    
    # –ü–∞—Ç—Ç–µ—Ä–Ω 2: —Å –¥–≤–æ–µ—Ç–æ—á–∏–µ–º
    # –ü—Ä–∏–º–µ—Ä: "- `PRIMARY KEY` : —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å" –∏–ª–∏ "1. `PRIMARY KEY` : —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å"
    pattern_colon = r'^(\s*(?:-|\d+\.)\s+)`([^`]+)`\s*:\s*(.+)$'
    
    # –ü–∞—Ç—Ç–µ—Ä–Ω 3: —Å –æ–±—ã—á–Ω—ã–º –¥–µ—Ñ–∏—Å–æ–º + –ø—Ä–æ–±–µ–ª (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø—É—Ç–∞–Ω —Å —Ç–∏—Ä–µ)
    # –ü—Ä–∏–º–µ—Ä: "- `–∫–æ–¥` - –ø–æ—è—Å–Ω–µ–Ω–∏–µ" –∏–ª–∏ "1. `–∫–æ–¥` - –ø–æ—è—Å–Ω–µ–Ω–∏–µ"
    pattern_hyphen = r'^(\s*(?:-|\d+\.)\s+)`([^`]+)`\s*-\s*(.+)$'
    
    if re.match(pattern_dash, line):
        # –£–±–∏—Ä–∞–µ–º backticks, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª–∏–Ω–Ω–æ–µ —Ç–∏—Ä–µ
        line = re.sub(pattern_dash, r'\1\2 ‚Äî \3', line)
    elif re.match(pattern_colon, line):
        # –£–±–∏—Ä–∞–µ–º backticks, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–≤–æ–µ—Ç–æ—á–∏–µ
        line = re.sub(pattern_colon, r'\1\2: \3', line)
    elif re.match(pattern_hyphen, line):
        # –£–±–∏—Ä–∞–µ–º backticks, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–µ—Ñ–∏—Å
        line = re.sub(pattern_hyphen, r'\1\2 - \3', line)
    
    return line


def remove_bold_in_lists(line: str) -> str:
    """
    –£–±–∏—Ä–∞–µ—Ç –í–°–Å –∂–∏—Ä–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (**—Ç–µ–∫—Å—Ç**) –≤ —Å–ø–∏—Å–∫–∞—Ö
    
    Editor.js –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–µ—Ä—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∂–∏—Ä–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ —Å–ø–∏—Å–∫–∞—Ö.
    –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º:
    - "- –ö–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ **–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞**" ‚Üí —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ "–ö–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞"
    - "- üî• **70% –ø—Ä–æ–µ–∫—Ç–æ–≤**" ‚Üí —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ "üî•"
    - "1. **–¢–µ–∫—Å—Ç** –≤ —Å–ø–∏—Å–∫–µ" ‚Üí —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—É—Å—Ç–æ—Ç—É
    
    –†–µ—à–µ–Ω–∏–µ: —É–±–∏—Ä–∞–µ–º ** –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ —Å–ø–∏—Å–∫–∞—Ö (–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ò –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö).
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É –±–µ–∑ –∂–∏—Ä–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–ø–∏—Å–∫–∞—Ö
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–º —Å–ø–∏—Å–∫–∞ (–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–ª–∏ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π)
    # –ú–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π: - —Ç–µ–∫—Å—Ç
    # –ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π: 1. —Ç–µ–∫—Å—Ç, 2. —Ç–µ–∫—Å—Ç –∏ —Ç.–¥.
    if re.match(r'^\s*(-|\d+\.)\s+', line):
        # –£–±–∏—Ä–∞–µ–º –í–°–Å –∂–∏—Ä–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (**—Ç–µ–∫—Å—Ç**)
        line = re.sub(r'\*\*([^*]+)\*\*', r'\1', line)
    
    return line


def remove_code_in_lists(line: str) -> str:
    """
    –£–±–∏—Ä–∞–µ—Ç –í–°–Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (`—Ç–µ–∫—Å—Ç`) –≤ —Å–ø–∏—Å–∫–∞—Ö
    
    Editor.js —Ç–µ—Ä—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–Ω—É—Ç—Ä–∏ backticks –≤ —Å–ø–∏—Å–∫–∞—Ö.
    –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º:
    - "- –£–±–∏—Ç—å –∑–∞–ø—Ä–æ—Å: `SELECT pg_terminate_backend(pid);`" ‚Üí editor.js –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ "–£–±–∏—Ç—å –∑–∞–ø—Ä–æ—Å:"
    - "- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DROP TABLE` –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ" ‚Üí editor.js –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ"
    - "1. `incident_id ‚Üí analyst_id` (–ø–æ—è—Å–Ω–µ–Ω–∏–µ)" ‚Üí editor.js —Ç–µ—Ä—è–µ—Ç –≤—Å—ë
    
    –†–µ—à–µ–Ω–∏–µ: —É–±–∏—Ä–∞–µ–º ` –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ —Å–ø–∏—Å–∫–∞—Ö, –æ—Å—Ç–∞–≤–ª—è—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É –±–µ–∑ backticks –≤ —Å–ø–∏—Å–∫–∞—Ö
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–º —Å–ø–∏—Å–∫–∞ (–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–ª–∏ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π)
    if re.match(r'^\s*(-|\d+\.)\s+', line):
        # –£–±–∏—Ä–∞–µ–º –í–°–Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (`—Ç–µ–∫—Å—Ç`)
        line = re.sub(r'`([^`]+)`', r'\1', line)
    
    return line


def unify_nested_list_types(lines: List[str]) -> List[str]:
    """
    –£–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Ç–∏–ø—ã –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å editor.js
    
    Editor.js –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–º–µ—à–∞–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ (–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π + –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π).
    –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:
    - –ï—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π (1.) ‚Üí –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ç–æ–∂–µ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ
    - –ï—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (-) ‚Üí –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ç–æ–∂–µ –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
    
    –ü—Ä–∏–º–µ—Ä:
    –ë—ã–ª–æ:
        1. –ü–µ—Ä–≤—ã–π –ø—É–Ω–∫—Ç
           - –ü–æ–¥–ø—É–Ω–∫—Ç A     ‚Üê –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–Ω—É—Ç—Ä–∏ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ
           - –ü–æ–¥–ø—É–Ω–∫—Ç B
    
    –°—Ç–∞–Ω–µ—Ç:
        1. –ü–µ—Ä–≤—ã–π –ø—É–Ω–∫—Ç
           1. –ü–æ–¥–ø—É–Ω–∫—Ç A    ‚Üê –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π (–∫–∞–∫ —Ä–æ–¥–∏—Ç–µ–ª—å)
           2. –ü–æ–¥–ø—É–Ω–∫—Ç B
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        lines: –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫
    """
    result = []
    parent_type = None  # 'numbered' –∏–ª–∏ 'bullet'
    parent_indent = 0   # –£—Ä–æ–≤–µ–Ω—å –æ—Ç—Å—Ç—É–ø–∞ —Ä–æ–¥–∏—Ç–µ–ª—è
    nested_counter = 1  # –°—á—ë—Ç—á–∏–∫ –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
    
    for i, line in enumerate(lines):
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∏ –æ—Ç—Å—Ç—É–ø —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏
        stripped = line.lstrip()
        current_indent = len(line) - len(stripped)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–º —Å–ø–∏—Å–∫–∞
        is_numbered = re.match(r'^\d+\.\s+', stripped)
        is_bullet = re.match(r'^-\s+', stripped)
        
        if not is_numbered and not is_bullet:
            # –û–±—ã—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (–Ω–µ —Å–ø–∏—Å–æ–∫)
            result.append(line)
            # –ï—Å–ª–∏ –æ—Ç—Å—Ç—É–ø –º–µ–Ω—å—à–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
            if current_indent <= parent_indent:
                parent_type = None
                parent_indent = 0
                nested_counter = 1
            continue
        
        # –≠—Ç–æ —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
        if current_indent == 0 or current_indent <= parent_indent:
            # –≠—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç (–Ω–µ—Ç –æ—Ç—Å—Ç—É–ø–∞ –∏–ª–∏ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å)
            result.append(line)
            parent_indent = current_indent
            nested_counter = 1  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è
            
            if is_numbered:
                parent_type = 'numbered'
            elif is_bullet:
                parent_type = 'bullet'
        else:
            # –≠—Ç–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç (–µ—Å—Ç—å –æ—Ç—Å—Ç—É–ø)
            if parent_type is None:
                # –ù–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è - –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
                result.append(line)
                continue
            
            # –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ –º–∞—Ä–∫–µ—Ä–∞ —Å–ø–∏—Å–∫–∞
            if is_numbered:
                text = re.sub(r'^\d+\.\s+', '', stripped)
            elif is_bullet:
                text = re.sub(r'^-\s+', '', stripped)
            else:
                text = stripped
            
            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Ç–∏–ø —Ä–æ–¥–∏—Ç–µ–ª—è
            indent_spaces = ' ' * current_indent
            
            if parent_type == 'numbered':
                # –†–æ–¥–∏—Ç–µ–ª—å –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π ‚Üí –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ç–æ–∂–µ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π
                result.append(f"{indent_spaces}{nested_counter}. {text}")
                nested_counter += 1
            else:
                # –†–æ–¥–∏—Ç–µ–ª—å –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ‚Üí –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ç–æ–∂–µ –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
                result.append(f"{indent_spaces}- {text}")
    
    return result


def remove_italic_in_lists(line: str) -> str:
    """
    –£–±–∏—Ä–∞–µ—Ç –í–°–Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∏–≤–æ–º (*—Ç–µ–∫—Å—Ç*) –≤ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–∞—Ö
    
    Editor.js —Ç–µ—Ä—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–Ω—É—Ç—Ä–∏ –∫—É—Ä—Å–∏–≤–∞ –≤ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–∞—Ö:
    - "1. *incident_id ‚Üí analyst_id* (–ø–æ—è—Å–Ω–µ–Ω–∏–µ)" ‚Üí editor.js –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ "incident_id ‚Üí analyst_id"
    
    –†–µ—à–µ–Ω–∏–µ: —É–±–∏—Ä–∞–µ–º * –≤ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–∞—Ö, –æ—Å—Ç–∞–≤–ª—è—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É –±–µ–∑ –∫—É—Ä—Å–∏–≤–∞ –≤ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–∞—Ö
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º
    if re.match(r'^\s*\d+\.\s+', line):
        # –£–±–∏—Ä–∞–µ–º –í–°–Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∏–≤–æ–º (*—Ç–µ–∫—Å—Ç*)
        # –ù–æ –ù–ï —Ç—Ä–æ–≥–∞–µ–º markdown —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ —Ç–∏–ø–∞ * * *
        line = re.sub(r'(?<!\*)\*(?!\*)([^*]+)\*(?!\*)', r'\1', line)
    
    return line


def remove_inline_code_everywhere(line: str) -> str:
    """
    –£–±–∏—Ä–∞–µ—Ç –í–°–ï inline backticks (`—Ç–µ–∫—Å—Ç`) –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
    
    Editor.js –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç inline –∫–æ–¥ –≤ –æ–±—ã—á–Ω–æ–º —Ç–µ–∫—Å—Ç–µ:
    - "—Ç–∞–±–ª–∏—Ü—É `users` (avatar)" ‚Üí —Å–æ–∑–¥–∞—ë—Ç –±–ª–æ–∫ –∫–æ–¥–∞ "users1javascript"
    
    –†–µ—à–µ–Ω–∏–µ: —É–±–∏—Ä–∞–µ–º –≤—Å–µ inline backticks, –∑–∞–º–µ–Ω—è—è –Ω–∞ –∫—É—Ä—Å–∏–≤ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤.
    –ù–ï —Ç—Ä–æ–≥–∞–µ–º –±–ª–æ–∫–∏ –∫–æ–¥–∞ (—Å—Ç—Ä–æ–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å ```)
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É –±–µ–∑ inline backticks (backticks –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∫—É—Ä—Å–∏–≤)
    """
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –±–ª–æ–∫–∏ –∫–æ–¥–∞ (–Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å ```)
    if line.strip().startswith('```'):
        return line
    
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö (—Å–æ–¥–µ—Ä–∂–∞—Ç | –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏)
    if '|' in line and not line.strip().startswith('|'):
        # –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã, –Ω–æ –Ω–µ –Ω–∞—á–∞–ª–æ (–Ω–∞—á–∞–ª–æ –æ–±—ã—á–Ω–æ |---|---|)
        # –í—Å—ë —Ä–∞–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º, –Ω–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ
        pass
    
    # –£–±–∏—Ä–∞–µ–º inline backticks, –∑–∞–º–µ–Ω—è—è –Ω–∞ –∫—É—Ä—Å–∏–≤ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤
    # `—Ç–µ–∫—Å—Ç` ‚Üí *—Ç–µ–∫—Å—Ç* (–∫—É—Ä—Å–∏–≤ –≤–º–µ—Å—Ç–æ –∫–æ–¥–∞)
    line = re.sub(r'`([^`]+)`', r'*\1*', line)
    
    return line


def wrap_technical_terms_in_italic_except_images(line: str) -> str:
    """
    –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –≤ –∫—É—Ä—Å–∏–≤, –ù–û –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø—É—Ç–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
    
    –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ wrap_technical_terms_in_italic, –Ω–æ –∏—Å–∫–ª—é—á–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É
    –ø—É—Ç–µ–π –≤–Ω—É—Ç—Ä–∏ ![alt](path) –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å—Å—ã–ª–æ–∫ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤ —Å—Ç—Ä–æ–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ![alt](path)
    # –ï—Å–ª–∏ –µ—Å—Ç—å, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –ø–æ —á–∞—Å—Ç—è–º, –∏—Å–∫–ª—é—á–∞—è –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
    pattern = r'(!\[[^\]]+\]\()([^\)]+)(\))'
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ —Å—Ç—Ä–æ–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    if re.search(pattern, line):
        # –†–∞–∑–±–∏–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –Ω–∞ —á–∞—Å—Ç–∏: –¥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –ø—É—Ç—å, –ø–æ—Å–ª–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        def process_without_image_path(match):
            before_path = match.group(1)  # ![alt](
            path = match.group(2)  # –ø—É—Ç—å
            after_path = match.group(3)  # )
            # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —á–∞—Å—Ç–∏ –î–û –∏ –ü–û–°–õ–ï –ø—É—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
            before_processed = wrap_technical_terms_in_italic(before_path)
            after_processed = wrap_technical_terms_in_italic(after_path)
            # –°–æ–±–∏—Ä–∞–µ–º –≤–º–µ—Å—Ç–µ, –Ω–µ —Ç—Ä–æ–≥–∞—è –ø—É—Ç—å
            return before_processed + path + after_processed
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É, –∑–∞—â–∏—â–∞—è –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
        line = re.sub(pattern, process_without_image_path, line)
        return line
    
    # –ï—Å–ª–∏ –Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ –æ–±—ã—á–Ω–æ
    return wrap_technical_terms_in_italic(line)


def wrap_technical_terms_in_italic(line: str) -> str:
    """
    –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –ë–î) –≤ –∫—É—Ä—Å–∏–≤
    
    Editor.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –≤ JavaScript –±–ª–æ–∫–∏:
    - "course_title –∏ instructor" ‚Üí "course_title1javascript –∏ instructor1javascript"
    
    –†–µ—à–µ–Ω–∏–µ: –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –≤ –∫—É—Ä—Å–∏–≤ –∑–∞—Ä–∞–Ω–µ–µ.
    
    –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã:
    - snake_case: —Å–ª–æ–≤–∞ —Å –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ–º (student_id, course_title)
    - –û–¥–Ω–æ—Å–ª–æ–∂–Ω—ã–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ —Å–ª–æ–≤–∞ —Ä—è–¥–æ–º —Å —Ä—É—Å—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º (users, profiles)
    
    –ù–ï —Ç—Ä–æ–≥–∞–µ–º:
    - –ë–ª–æ–∫–∏ –∫–æ–¥–∞ (```)
    - –°—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü (–Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å |)
    - –°–ø–∏—Å–∫–∏ (–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ) ‚Äî —Ç–∞–º –≤—Å—ë —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–±–∏—Ä–∞–µ—Ç—Å—è
    - –£–∂–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (–≤–Ω—É—Ç—Ä–∏ * –∏–ª–∏ **)
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Ä–º–∏–Ω–∞–º–∏ –≤ –∫—É—Ä—Å–∏–≤–µ
    """
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –±–ª–æ–∫–∏ –∫–æ–¥–∞
    if line.strip().startswith('```'):
        return line
    
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü (–Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å | –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –º–Ω–æ–≥–æ |)
    if line.strip().startswith('|') or line.count('|') > 2:
        return line
    
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (–∑–∞–≥–æ–ª–æ–≤–∫–∏, –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏)
    if line.strip().startswith('#') or line.strip() == '---':
        return line
    
    # –í–ê–ñ–ù–û: –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–ø–∏—Å–∫–∏ (–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ)
    # –í —Å–ø–∏—Å–∫–∞—Ö editor.js —Ç–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ—ç—Ç–æ–º—É —Ç–∞–º –≤—Å–µ —Ç–µ—Ä–º–∏–Ω—ã - –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç
    if re.match(r'^\s*(-|\d+\.)\s+', line):
        return line
    
    # –ü–∞—Ç—Ç–µ—Ä–Ω 1: snake_case —Ç–µ—Ä–º–∏–Ω—ã (—Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω underscore)
    # –ü—Ä–∏–º–µ—Ä—ã: student_id, course_title, user_id
    # –ù–ï –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º, –µ—Å–ª–∏ —É–∂–µ –≤–Ω—É—Ç—Ä–∏ * –∏–ª–∏ **
    
    def wrap_snake_case(match):
        word = match.group(1)
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç - –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —É–∂–µ –≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        # –≠—Ç–æ –ø—Ä–∏–±–ª–∏–∂—ë–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, –Ω–µ –∏–¥–µ–∞–ª—å–Ω–∞—è
        return f"*{word}*"
    
    # –ò—â–µ–º —Å–ª–æ–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∞ word_word (snake_case)
    # –ù–æ –ù–ï —Ç—Ä–æ–≥–∞–µ–º, –µ—Å–ª–∏ –ø–µ—Ä–µ–¥ —Å–ª–æ–≤–æ–º * –∏–ª–∏ **
    line = re.sub(r'(?<![*])\b([a-z][a-z0-9]*(?:_[a-z0-9]+)+)\b(?![*])', wrap_snake_case, line)
    
    # –ü–∞—Ç—Ç–µ—Ä–Ω 2: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–¥–Ω–æ—Å–ª–æ–∂–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã (users, profiles, incidents –∏ —Ç.–¥.)
    # –¢–æ–ª—å–∫–æ –º–∞–ª–µ–Ω—å–∫–∏–µ –±—É–∫–≤—ã, –¥–ª–∏–Ω–∞ 4+ —Å–∏–º–≤–æ–ª–æ–≤
    # –ù–ï —Ç—Ä–æ–≥–∞–µ–º: —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å–ª–æ–≤–∞
    # –ù–ï —Ç—Ä–æ–≥–∞–µ–º: —Å–ª–æ–≤–∞ –≤–Ω—É—Ç—Ä–∏ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö —Å–ª–æ–≤ (NULL-able)
    
    # –°–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (–æ–±—ã—á–Ω—ã–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å–ª–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –ù–ï –Ω—É–∂–Ω–æ –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å)
    common_words = {
        'is', 'are', 'was', 'were', 'be', 'been', 'being',
        'and', 'or', 'not', 'but', 'if', 'the', 'a', 'an',
        'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by',
        'as', 'it', 'this', 'that', 'from', 'all', 'can',
        'will', 'would', 'should', 'could', 'may', 'might',
        'do', 'does', 'did', 'have', 'has', 'had',
        'get', 'set', 'use', 'make', 'take', 'go', 'see',
        'new', 'old', 'first', 'last', 'next', 'one', 'two',
        'when', 'where', 'why', 'how', 'what', 'which',
        'some', 'any', 'many', 'much', 'few', 'more', 'most',
        'only', 'just', 'also', 'even', 'well', 'way', 'back',
        'time', 'year', 'work', 'part', 'case', 'over', 'than',
        'able', 'data', 'into', 'then', 'them', 'each', 'such'
    }
    
    # –ù–∞—Ö–æ–¥–∏–º –ª–∞—Ç–∏–Ω—Å–∫–∏–µ —Å–ª–æ–≤–∞ –¥–ª–∏–Ω–æ–π 4+ —Å–∏–º–≤–æ–ª–æ–≤
    # –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤ –∫—É—Ä—Å–∏–≤, –µ—Å–ª–∏ –ù–ï –≤ —Å–ø–∏—Å–∫–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
    # –ò –ù–ï –≤–Ω—É—Ç—Ä–∏ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ —Å–ª–æ–≤–∞ (–ø–æ—Å–ª–µ –¥–µ—Ñ–∏—Å–∞)
    def replace_tech_term(match):
        word = match.group(1)
        if word.lower() in common_words:
            return word  # –ù–µ —Ç—Ä–æ–≥–∞–µ–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
        return f"*{word}*"
    
    # –ü–∞—Ç—Ç–µ—Ä–Ω: –ª–∞—Ç–∏–Ω—Å–∫–æ–µ —Å–ª–æ–≤–æ (4+ –±—É–∫–≤—ã, —Ç–æ–ª—å–∫–æ –º–∞–ª–µ–Ω—å–∫–∏–µ)
    # –ù–ï –ø–æ—Å–ª–µ –¥–µ—Ñ–∏—Å–∞ (—á—Ç–æ–±—ã –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å NULL-able)
    # –ù–ï –≤–Ω—É—Ç—Ä–∏ * –∏–ª–∏ **
    line = re.sub(r'(?<![-*])\b([a-z]{4,})\b(?![*])', replace_tech_term, line)
    
    return line


def fix_emoji_at_list_start(line: str) -> str:
    """
    –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å editor.js: —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ —Å–ø–∏—Å–∫–∞
    
    Editor.js —Ç–µ—Ä—è–µ—Ç –≤–µ—Å—å —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞.
    –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º:
    - "- üî• 70% –ø—Ä–æ–µ–∫—Ç–æ–≤" ‚Üí editor.js –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ "üî•"
    - "- üìä –¢–∏–ø–∏—á–Ω—ã–π —Å—Ç–µ–∫" ‚Üí editor.js –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ "üìä"
    
    –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–ª—è–µ–º –¥–≤–æ–µ—Ç–æ—á–∏–µ –∏–ª–∏ —Ç–∏—Ä–µ –ø–æ—Å–ª–µ —ç–º–æ–¥–∑–∏ –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å.
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º –ø–æ—Å–ª–µ —ç–º–æ–¥–∑–∏
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–º —Å–ø–∏—Å–∫–∞, –Ω–∞—á–∏–Ω–∞—é—â–∏–º—Å—è —Å —ç–º–æ–¥–∑–∏
    # –ü–∞—Ç—Ç–µ—Ä–Ω: –Ω–∞—á–∞–ª–æ —Å—Ç—Ä–æ–∫–∏, —Å–ø–∏—Å–æ–∫ (- –∏–ª–∏ 1.), –ø—Ä–æ–±–µ–ª—ã, —ç–º–æ–¥–∑–∏, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π variation selector, –ø—Ä–æ–±–µ–ª, —Ç–µ–∫—Å—Ç
    # –≠–º–æ–¥–∂–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —á–µ—Ä–µ–∑ –¥–∏–∞–ø–∞–∑–æ–Ω—ã unicode + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π variation selector \uFE0F
    emoji_pattern = r'^(\s*(?:-|\d+\.)\s+)([\U0001F300-\U0001F9FF\U0001F600-\U0001F64F\U0001F680-\U0001F6FF\U00002600-\U000027BF\U0001F1E0-\U0001F1FF\U0001F900-\U0001F9FF\U0001FA70-\U0001FAFF][\uFE0F]?)\s+(.+)$'
    
    match = re.match(emoji_pattern, line)
    if match:
        # –î–æ–±–∞–≤–ª—è–µ–º –¥–≤–æ–µ—Ç–æ—á–∏–µ –ø–æ—Å–ª–µ —ç–º–æ–¥–∑–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è
        line = f"{match.group(1)}{match.group(2)}: {match.group(3)}"
    
    return line


def process_details_blocks(lines: List[str]) -> List[str]:
    """
    –†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –±–ª–æ–∫–∏ <details>/<summary>, —É–¥–∞–ª—è—è —Ç–µ–≥–∏ –∏ –æ—Å—Ç–∞–≤–ª—è—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
    
    –í–ê–ñ–ù–û: –¢–∞–∫–∂–µ —É–¥–∞–ª—è–µ—Ç —Å—Ç—Ä–æ–∫–∏-–∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∏–ø–∞ "üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç",
    –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞–ª–∏—Å—å –æ—Ç summary –∏ —Ç–µ–ø–µ—Ä—å –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã (–Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∫—Ä—ã—Ç—å).
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        lines: –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫
    """
    result = []
    in_details = False
    in_summary = False
    summary_content = ""  # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ summary –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    
    for line in lines:
        # –ù–∞—á–∞–ª–æ –±–ª–æ–∫–∞ details
        if '<details>' in line.lower():
            in_details = True
            # –ï—Å–ª–∏ –Ω–∞ —ç—Ç–æ–π –∂–µ —Å—Ç—Ä–æ–∫–µ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ
            clean_line = re.sub(r'<details>', '', line, flags=re.IGNORECASE)
            if clean_line.strip():
                result.append(clean_line)
            continue
        
        # –¢–µ–≥ summary - –∏–∑–≤–ª–µ–∫–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –Ω–æ –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        if '<summary>' in line.lower():
            in_summary = True
            # –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ summary –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
            clean_line = re.sub(r'<summary>', '', line, flags=re.IGNORECASE)
            clean_line = re.sub(r'</summary>', '', clean_line, flags=re.IGNORECASE)
            summary_content = clean_line.strip()
            # –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç - —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞
            continue
        
        # –ó–∞–∫—Ä—ã—Ç–∏–µ summary
        if '</summary>' in line.lower():
            in_summary = False
            summary_content = ""
            continue
        
        # –ó–∞–∫—Ä—ã—Ç–∏–µ details
        if '</details>' in line.lower():
            in_details = False
            continue
        
        # –û–±—ã—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ - –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
        result.append(line)
    
    return result


def remove_show_answer_headers(line: str) -> str:
    """
    –£–¥–∞–ª—è–µ—Ç —Å—Ç—Ä–æ–∫–∏-–∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∏–ø–∞ "üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç" –∏–ª–∏ "–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ"
    
    –≠—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –æ—Å—Ç–∞–ª–∏—Å—å –ø–æ—Å–ª–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è <details>/<summary> –±–ª–æ–∫–æ–≤.
    –¢–µ–ø–µ—Ä—å –æ–Ω–∏ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã (–Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∫—Ä—ã—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç).
    
    –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è:
    - "**üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç**"
    - "**–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ**"
    - –õ—é–±—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å "–ü–æ–∫–∞–∑–∞—Ç—å"
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        None, –µ—Å–ª–∏ —ç—Ç–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ "–ü–æ–∫–∞–∑–∞—Ç—å..." (—Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–¥–∞–ª–µ–Ω–∞)
        –ò—Å—Ö–æ–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö (–≤–∫–ª—é—á–∞—è –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏!)
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "–ü–æ–∫–∞–∑–∞—Ç—å..."
    # –ü–∞—Ç—Ç–µ—Ä–Ω—ã:
    # - **üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç**
    # - **–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ**
    # - –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç (–±–µ–∑ –∂–∏—Ä–Ω–æ–≥–æ)
    
    stripped = line.strip()
    
    # –ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –í–°–ï–ì–î–ê —Å–æ—Ö—Ä–∞–Ω—è–µ–º (–≤–∞–∂–Ω–æ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –±–ª–æ–∫–æ–≤!)
    if not stripped:
        return line
    
    # –£–±–∏—Ä–∞–µ–º –∂–∏—Ä–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    clean = re.sub(r'\*\*([^*]+)\*\*', r'\1', stripped)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω—ã "–ü–æ–∫–∞–∑–∞—Ç—å ..."
    if re.match(r'^[üëÅÔ∏è\s]*–ü–æ–∫–∞–∑–∞—Ç—å\s+(–æ—Ç–≤–µ—Ç|—Ä–µ—à–µ–Ω–∏–µ|—Ä–µ–∑—É–ª—å—Ç–∞—Ç)', clean, re.IGNORECASE):
        return None  # –£–¥–∞–ª—è–µ–º —Å—Ç—Ä–æ–∫—É (–≤–æ–∑–≤—Ä–∞—â–∞–µ–º None, –∞ –Ω–µ "")
    
    return line


def convert_markdown_links(line: str) -> str:
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç markdown-—Å—Å—ã–ª–∫–∏ –≤ —Ç–µ–∫—Å—Ç —Å URL –≤ —Å–∫–æ–±–∫–∞—Ö –¥–ª—è editor.js
    
    Editor.js –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç markdown-—Å—Å—ã–ª–∫–∏ [—Ç–µ–∫—Å—Ç](url).
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ —Ç–µ–∫—Å—Ç, –∏ URL, –Ω–æ URL –±–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.
    
    –í–ê–ñ–ù–û: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π) –ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è!
    - "![alt](./image.svg)" –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    - "[—Ç–µ–∫—Å—Ç](url)" –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ "*—Ç–µ–∫—Å—Ç (url)*"
    
    –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:
    - "[PostgreSQL Docs](https://postgresql.org)" ‚Üí "*PostgreSQL Docs (postgresql.org)*"
    - "[GitHub](https://github.com)" ‚Üí "*GitHub (github.com)*"
    - "![INNER JOIN](./image.svg)" ‚Üí "![INNER JOIN](./image.svg)" (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô!)
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É —Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏: *—Ç–µ–∫—Å—Ç (url)*
    """
    # –°–ø–∏—Å–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    image_extensions = ['.png', '.jpg', '.jpeg', '.gif', '.svg', '.webp', '.bmp']
    
    # –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è markdown-—Å—Å—ã–ª–æ–∫: [—Ç–µ–∫—Å—Ç](url) –∏–ª–∏ ![alt](url)
    # –ù–û –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    def replace_link(match):
        full_match = match.group(0)  # –í—Å—è —Å—Å—ã–ª–∫–∞ [!text](url) –∏–ª–∏ [text](url)
        optional_bang = match.group(1)  # –ì—Ä—É–ø–ø–∞ 1: `!` –∏–ª–∏ –ø—É—Å—Ç–æ
        text = match.group(2)  # –ì—Ä—É–ø–ø–∞ 2: —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ []
        url = match.group(3)  # –ì—Ä—É–ø–ø–∞ 3: URL –≤–Ω—É—Ç—Ä–∏ ()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å !)
        is_image = optional_bang == '!'
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ URL –ø—É—Ç–µ–º –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
        is_image_path = any(url.lower().endswith(ext) for ext in image_extensions)
        
        # –ï—Å–ª–∏ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å ! –∏–ª–∏ –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é), –ù–ï –û–ë–†–ê–ë–ê–¢–´–í–ê–ï–ú
        if is_image or is_image_path:
            return full_match  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞–∫ –µ—Å—Ç—å
        
        # –î–ª—è –æ–±—ã—á–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º
        # –£–±–∏—Ä–∞–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª –∏–∑ URL
        url_clean = re.sub(r'^https?://', '', url)
        return f'*{text} ({url_clean})*'
    
    # –ü–∞—Ç—Ç–µ—Ä–Ω: (!?) –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π !, –∑–∞—Ç–µ–º —Ç–µ–∫—Å—Ç –∏ URL
    line = re.sub(r'(!?)\[([^\]]+)\]\(([^)]+)\)', replace_link, line)
    
    return line


def remove_bare_urls(line: str) -> str:
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≥–æ–ª—ã–µ URL –≤ —Ç–µ–∫—Å—Ç —Å URL –±–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –¥–ª—è editor.js
    
    Editor.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Å—Å—ã–ª–∫–∏ –∏–∑ URL —Ç–∏–ø–∞ https://example.com
    –ß—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —ç—Ç–æ, –∑–∞–º–µ–Ω—è–µ–º URL –Ω–∞ —Ç–µ–∫—Å—Ç —Å URL –±–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.
    
    –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:
    - "https://www.postgresql.org/docs/" ‚Üí "www.postgresql.org/docs/"
    - "http://example.com" ‚Üí "example.com"
    - "www.example.com" ‚Üí "www.example.com"
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É —Å –∑–∞–º–µ–Ω—ë–Ω–Ω—ã–º–∏ URL –±–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
    """
    # –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ URL
    # https:// –∏–ª–∏ http:// URL - —É–±–∏—Ä–∞–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª
    # –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –≤—Å—ë –∫—Ä–æ–º–µ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–∏
    line = re.sub(r'https?://([^\s)]+)', r'\1', line)
    
    return line


def quote_operators_in_lists(line: str) -> str:
    """
    –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤ –∫–∞–≤—ã—á–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è markdown-—Ä–∞–∑–º–µ—Ç–∫–∏
    
    Editor.js –º–æ–∂–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Ç–∏–ø–∞ >= –∫–∞–∫ —Ü–∏—Ç–∞—Ç—ã.
    –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º –∏—Ö –≤ –∫–∞–≤—ã—á–∫–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç.
    
    –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:
    - "-> ‚Äî –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON(B) –æ–±—ä–µ–∫—Ç" ‚Üí "\"->\" ‚Äî –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON(B) –æ–±—ä–µ–∫—Ç"
    - ">= ‚Äî –ë–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ" ‚Üí "\">=\" ‚Äî –ë–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ"
    - "!= ‚Äî –ù–µ —Ä–∞–≤–Ω–æ" ‚Üí "\"!=\" ‚Äî –ù–µ —Ä–∞–≤–Ω–æ"
    
    –ù–ï —Ç—Ä–æ–≥–∞–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤ –±–ª–æ–∫–∞—Ö –∫–æ–¥–∞ (—Å—Ç—Ä–æ–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å ```)
    –ù–ï —Ç—Ä–æ–≥–∞–µ—Ç markdown-—Ü–∏—Ç–∞—Ç—ã (—Å—Ç—Ä–æ–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å "> ")
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –≤ –∫–∞–≤—ã—á–∫–∞—Ö
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –ù–ï –±–ª–æ–∫ –∫–æ–¥–∞
    if line.strip().startswith('```'):
        return line
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –ù–ï markdown-—Ü–∏—Ç–∞—Ç–∞ (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "> ")
    if re.match(r'^\s*>\s+', line):
        return line
    
    # –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤ –∫–∞–≤—ã—á–∫–∏
    # –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
    operators = [
        r'->',      # —Å—Ç—Ä–µ–ª–∫–∞
        r'->>',     # –¥–≤–æ–π–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞
        r'@>',      # –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è
        r'\?',      # –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
        r'<=',      # –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
        r'>=',      # –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
        r'!=',      # –Ω–µ —Ä–∞–≤–Ω–æ
    ]
    
    for op in operators:
        # –ò—â–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä –≤ —Å—Ç—Ä–æ–∫–µ (–Ω–µ —Ç–æ–ª—å–∫–æ –≤ —Å–ø–∏—Å–∫–∞—Ö)
        # –ü–∞—Ç—Ç–µ—Ä–Ω: –Ω–∞—á–∞–ª–æ —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ –ø—Ä–æ–±–µ–ª, –∑–∞—Ç–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä, –∑–∞—Ç–µ–º –ø—Ä–æ–±–µ–ª –∏–ª–∏ —Ç–∏—Ä–µ
        pattern = r'(\s|^)(' + op + r')(\s*‚Äî\s*|\s+)'
        replacement = r'\1"\2"\3'
        line = re.sub(pattern, replacement, line)
    
    return line


def remove_blockquotes(line: str) -> str:
    """
    –£–±–∏—Ä–∞–µ—Ç markdown-—Ü–∏—Ç–∞—Ç—ã (>) –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å editor.js
    
    Editor.js –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–ª–æ–∫-—Ü–∏—Ç–∞—Ç—ã. –¢–µ–∫—Å—Ç –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è, –Ω–æ –±–µ–∑ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è.
    
    –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:
    - "> –¢–µ–∫—Å—Ç" ‚Üí "–¢–µ–∫—Å—Ç"
    - "> > –í–ª–æ–∂–µ–Ω–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞" ‚Üí "–í–ª–æ–∂–µ–Ω–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞"
    - "> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** —Ç–µ–∫—Å—Ç" ‚Üí "**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** —Ç–µ–∫—Å—Ç"
    
    –ù–ï —Ç—Ä–æ–≥–∞–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Ç–∏–ø–∞ ->, ->>, @>, <=, >=, !=
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É –±–µ–∑ —Å–∏–º–≤–æ–ª–æ–≤ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–æ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤)
    """
    # –£–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ markdown-—Ü–∏—Ç–∞—Ç—ã: —Å—Ç—Ä–æ–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å "> " (–±–æ–ª—å—à–µ + –ø—Ä–æ–±–µ–ª)
    # –ù–ï —Ç—Ä–æ–≥–∞–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Ç–∏–ø–∞ ->, ->>, @>, <=, >=, !=
    line = re.sub(r'^(\s*>\s+)+', '', line)
    
    return line


def remove_html_tags(line: str) -> str:
    """
    –£–¥–∞–ª—è–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ HTML —Ç–µ–≥–∏, –æ—Å—Ç–∞–≤–ª—è—è –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        line: –°—Ç—Ä–æ–∫–∞ markdown
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°—Ç—Ä–æ–∫—É –±–µ–∑ HTML —Ç–µ–≥–æ–≤
    """
    # –£–¥–∞–ª—è–µ–º —Ç–µ–≥–∏ <b>, <i>, <strong>, <em> –∏ –ø—Ä–æ—á–∏–µ –ø—Ä–æ—Å—Ç—ã–µ —Ç–µ–≥–∏
    line = re.sub(r'<b>([^<]+)</b>', r'**\1**', line, flags=re.IGNORECASE)
    line = re.sub(r'<i>([^<]+)</i>', r'*\1*', line, flags=re.IGNORECASE)
    line = re.sub(r'<strong>([^<]+)</strong>', r'**\1**', line, flags=re.IGNORECASE)
    line = re.sub(r'<em>([^<]+)</em>', r'*\1*', line, flags=re.IGNORECASE)
    
    # –£–¥–∞–ª—è–µ–º –ø—Ä–æ—á–∏–µ –ø—Ä–æ—Å—Ç—ã–µ —Ç–µ–≥–∏, –æ—Å—Ç–∞–≤–ª—è—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
    line = re.sub(r'<([a-z]+)>([^<]+)</\1>', r'\2', line, flags=re.IGNORECASE)
    
    return line


def simplify_markdown_file(input_path: Path, output_path: Path, encoding: str = 'utf-8') -> None:
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–∏–Ω markdown —Ñ–∞–π–ª, –ø—Ä–∏–º–µ–Ω—è—è –≤—Å–µ —É–ø—Ä–æ—â–µ–Ω–∏—è
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        input_path: –ü—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É
        output_path: –ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        encoding: –ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'utf-8')
    """
    # –ß–∏—Ç–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª
    with open(input_path, 'r', encoding=encoding) as f:
        lines = f.readlines()
    
    # –£–±–∏—Ä–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
    lines = [line.rstrip('\n\r') for line in lines]
    
    # –†–∞—Å–∫—Ä—ã–≤–∞–µ–º –±–ª–æ–∫–∏ details (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç —Å—Ä–∞–∑—É)
    lines = process_details_blocks(lines)
    
    # –£–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Å–º–µ—à–∞–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç —Å—Ä–∞–∑—É)
    lines = unify_nested_list_types(lines)
    
    # –ü–æ—Å—Ç—Ä–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
    processed_lines = []
    in_code_block = False  # –§–ª–∞–≥: –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ –∫–æ–¥–∞
    
    for line in lines:
        # –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –±–ª–æ–∫–∏ –∫–æ–¥–∞ (–Ω–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü ```)
        if line.strip().startswith('```'):
            in_code_block = not in_code_block
            processed_lines.append(line)
            continue
        
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞
        if in_code_block:
            processed_lines.append(line)
            continue
        
        # –£–¥–∞–ª—è–µ–º –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ "–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç" (–æ—Å—Ç–∞–ª–∏—Å—å –æ—Ç <summary>)
        line = remove_show_answer_headers(line)
        if line is None:  # –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —É–¥–∞–ª–µ–Ω–∞ (–≤–µ—Ä–Ω—É–ª—Å—è None), –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
            continue
        
        # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏
        line = normalize_headers(line)
        
        # –£–±–∏—Ä–∞–µ–º —á–µ–∫-–ª–∏—Å—Ç—ã
        line = remove_checklists(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: —É–±–∏—Ä–∞–µ–º –∂–∏—Ä–Ω–æ–µ –≤ —Å–ø–∏—Å–∫–∞—Ö —Å –¥–≤–æ–µ—Ç–æ—á–∏–µ–º (–¥–ª—è editor.js)
        line = fix_bold_colon_in_lists(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: —É–±–∏—Ä–∞–µ–º backticks –≤ —Å–ø–∏—Å–∫–∞—Ö —Å —Ç–∏—Ä–µ/–¥–≤–æ–µ—Ç–æ—á–∏–µ–º (–¥–ª—è editor.js)
        line = fix_code_with_dash_in_lists(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: —É–±–∏—Ä–∞–µ–º –í–°–Å –∂–∏—Ä–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–∞—Ö (editor.js —Ç–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç)
        line = remove_bold_in_lists(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: —É–±–∏—Ä–∞–µ–º –í–°–Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (`—Ç–µ–∫—Å—Ç`) –≤ —Å–ø–∏—Å–∫–∞—Ö (editor.js —Ç–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç)
        line = remove_code_in_lists(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –¥–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ—Å–ª–µ —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ —Å–ø–∏—Å–∫–∞ (editor.js —Ç–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç)
        line = fix_emoji_at_list_start(line)
        
        # –û–¢–ö–õ–Æ–ß–ï–ù–û: –£–ø—Ä–æ—â–∞–µ–º —Å–º–µ—à–∞–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        # (—Ç–µ–ø–µ—Ä—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫—É—Ä—Å–∏–≤ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤)
        # line = simplify_mixed_formatting(line)
        
        # –£–¥–∞–ª—è–µ–º HTML —Ç–µ–≥–∏
        line = remove_html_tags(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: —É–±–∏—Ä–∞–µ–º –±–ª–æ–∫-—Ü–∏—Ç–∞—Ç—ã (>) - editor.js –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
        line = remove_blockquotes(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: —É–±–∏—Ä–∞–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏–∑ URL –ü–ï–†–ï–î –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º —Å—Å—ã–ª–æ–∫
        line = remove_bare_urls(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º markdown-—Å—Å—ã–ª–∫–∏ [—Ç–µ–∫—Å—Ç](url) ‚Üí *—Ç–µ–∫—Å—Ç (url)*
        # –í–ê–ñ–ù–û: –î–û –æ–±—ë—Ä—Ç–∫–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤, —á—Ç–æ–±—ã –ø—É—Ç–∏ –Ω–µ –æ–±–æ—Ä–∞—á–∏–≤–∞–ª–∏—Å—å –≤ –∫—É—Ä—Å–∏–≤
        line = convert_markdown_links(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤ –∫–∞–≤—ã—á–∫–∏ –≤ —Å–ø–∏—Å–∫–∞—Ö (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç markdown-—Ä–∞–∑–º–µ—Ç–∫—É)
        line = quote_operators_in_lists(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: —É–±–∏—Ä–∞–µ–º –í–°–ï inline backticks –≤–µ–∑–¥–µ (editor.js —Å–æ–∑–¥–∞—ë—Ç –±–ª–æ–∫–∏ –∫–æ–¥–∞)
        line = remove_inline_code_everywhere(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –≤ –∫—É—Ä—Å–∏–≤ (editor.js –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∏—Ö –≤ –∫–æ–¥)
        # –ù–û —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –ù–ï –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
        line = wrap_technical_terms_in_italic_except_images(line)
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: —É–±–∏—Ä–∞–µ–º –∫—É—Ä—Å–∏–≤ –≤ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–∞—Ö –ü–û–°–õ–ï –æ–±—ë—Ä—Ç–∫–∏ —Ç–µ—Ä–º–∏–Ω–æ–≤ (editor.js —Ç–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç)
        line = remove_italic_in_lists(line)
        
        processed_lines.append(line)
    
    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –≤—ã–≤–æ–¥–∞, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    output_path.parent.mkdir(parents=True, exist_ok=True)
    
    # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    with open(output_path, 'w', encoding=encoding) as f:
        f.write('\n'.join(processed_lines))
    
    print(f"‚úì {input_path.name} ‚Üí {output_path.name}")


def process_directory(source_dir: str, target_dir: str, encoding: str = 'utf-8') -> int:
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ markdown —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        source_dir: –ò—Å—Ö–æ–¥–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å —Ñ–∞–π–ª–∞–º–∏ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è (detailed)
        target_dir: –¶–µ–ª–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (simpled)
        encoding: –ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'utf-8')
        
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
    """
    source_path = Path(source_dir)
    target_path = Path(target_dir)
    
    if not source_path.exists():
        print(f"‚ö† –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {source_dir}")
        return 0
    
    # –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ .md —Ñ–∞–π–ª—ã
    md_files = list(source_path.glob('*.md'))
    
    if not md_files:
        print(f"‚ö† –ù–µ—Ç .md —Ñ–∞–π–ª–æ–≤ –≤: {source_dir}")
        return 0
    
    count = 0
    for md_file in md_files:
        output_file = target_path / md_file.name
        simplify_markdown_file(md_file, output_file, encoding)
        count += 1
    
    return count


def main():
    """
    –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞ —É–ø—Ä–æ—â–µ–Ω–∏—è Markdown —Ñ–∞–π–ª–æ–≤.
    
    –ß–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ ss.ini –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ.
    """
    print("üîß Split and Simple - –£–ø—Ä–æ—â–µ–Ω–∏–µ Markdown –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è editor.js")
    print("=" * 70)
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    config_manager = ConfigManager('ss.ini')
    
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    if not config_manager.load_config():
        print("\nüí° –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª ss.ini —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:")
        print("""
[directories]
# –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
course_simplify_source = Course/Sections
course_simplify_target = Course/Simplified

[settings]
encoding = utf-8
""")
        return
    
    # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è
    directories = config_manager.get_simplify_directories()
    
    if not directories:
        print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!")
        print("   –î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä—ã *_simplify_source –∏ *_simplify_target –≤ —Å–µ–∫—Ü–∏—é [directories]")
        return
    
    # –ü–æ–ª—É—á–∞–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫—É
    encoding = config_manager.get_encoding()
    
    print(f"üìÅ –ù–∞–π–¥–µ–Ω–æ {len(directories)} –ø–∞—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è")
    print(f"üî§ –ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤: {encoding}")
    print()
    
    total_processed = 0
    total_files = 0
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—É—é –ø–∞—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
    for source_dir, target_dir in directories:
        print(f"üìÇ –£–ø—Ä–æ—â–µ–Ω–∏–µ: {source_dir} -> {target_dir}")
        
        if not source_dir.exists():
            print(f"  ‚ö†Ô∏è  –ò—Å—Ö–æ–¥–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è {source_dir} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
            continue
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
        try:
            files_count = process_directory(source_dir, target_dir, encoding)
            total_files += files_count
            total_processed += 1
            
            print(f"  ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: {files_count}")
                
        except Exception as e:
            print(f"  ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ {source_dir}: {e}")
    
    print("\n" + "=" * 70)
    print(f"‚úì –ì–æ—Ç–æ–≤–æ!")
    print(f"   –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π: {total_processed}")
    print(f"   –í—Å–µ–≥–æ —É–ø—Ä–æ—â–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: {total_files}")
    print("=" * 70)
    
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è—Ö
    print()
    print("–ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:")
    print("  ‚Ä¢ –í—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ —É—Ä–æ–≤–Ω—é 3 (###)")
    print("  ‚Ä¢ –ß–µ–∫-–ª–∏—Å—Ç—ã –ø—Ä–µ–≤—Ä–∞—â–µ–Ω—ã –≤ –æ–±—ã—á–Ω—ã–µ —Å–ø–∏—Å–∫–∏")
    print("  ‚Ä¢ –†–∞—Å–∫—Ä—ã—Ç—ã –≤—ã–ø–∞–¥–∞—é—â–∏–µ –±–ª–æ–∫–∏ <details>/<summary>")
    print("  ‚Ä¢ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã —Å–º–µ—à–∞–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ (–≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞, —á—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—å)")
    print("  ‚Ä¢ –£–¥–∞–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ '–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç' (–æ—Å—Ç–∞–ª–∏—Å—å –æ—Ç <summary>)")
    print("  ‚Ä¢ –£–±—Ä–∞–Ω—ã –±–ª–æ–∫-—Ü–∏—Ç–∞—Ç—ã (> —Ç–µ–∫—Å—Ç ‚Üí —Ç–µ–∫—Å—Ç) - editor.js –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç")
    print("  ‚Ä¢ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã markdown-—Å—Å—ã–ª–∫–∏ ([—Ç–µ–∫—Å—Ç](url) ‚Üí *—Ç–µ–∫—Å—Ç (url)*)")
    print("  ‚Ä¢ –£–±—Ä–∞–Ω—ã –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏–∑ –≥–æ–ª—ã—Ö URL (https://... ‚Üí ...)")
    print("  ‚Ä¢ –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –æ–±—ë—Ä–Ω—É—Ç—ã –≤ –∫–∞–≤—ã—á–∫–∏ (->, ->>, @>, <=, >=, !=)")
    print("  ‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–ø–∏—Å–∫–∏ —Å –∂–∏—Ä–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –∏ –¥–≤–æ–µ—Ç–æ—á–∏–µ–º (- **–¢–µ–∫—Å—Ç:** ...)")
    print("  ‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–ø–∏—Å–∫–∏ —Å backticks –∏ —Ç–∏—Ä–µ (- `–∫–æ–¥` ‚Äî –ø–æ—è—Å–Ω–µ–Ω–∏–µ)")
    print("  ‚Ä¢ –£–±—Ä–∞–Ω–æ –í–°–Å –∂–∏—Ä–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–∞—Ö (–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö + –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö)")
    print("  ‚Ä¢ –£–±—Ä–∞–Ω—ã –í–°–ï backticks –≤ —Å–ø–∏—Å–∫–∞—Ö (–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö + –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö)")
    print("  ‚Ä¢ –£–±—Ä–∞–Ω –∫—É—Ä—Å–∏–≤ –≤ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–∞—Ö (1. *—Ç–µ–∫—Å—Ç* ‚Üí 1. —Ç–µ–∫—Å—Ç)")
    print("  ‚Ä¢ –£–±—Ä–∞–Ω—ã –í–°–ï inline backticks –≤–µ–∑–¥–µ (`users` ‚Üí *users*)")
    print("  ‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –æ–±—ë—Ä–Ω—É—Ç—ã –≤ –∫—É—Ä—Å–∏–≤ –≤–Ω–µ —Å–ø–∏—Å–∫–æ–≤ (users, instructor)")
    print("  ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–≤–æ–µ—Ç–æ—á–∏–µ –ø–æ—Å–ª–µ —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ —Å–ø–∏—Å–∫–∞ (- üî• —Ç–µ–∫—Å—Ç ‚Üí - üî•: —Ç–µ–∫—Å—Ç)")
    print("  ‚Ä¢ –£–¥–∞–ª–µ–Ω—ã –ø—Ä–æ—Å—Ç—ã–µ HTML —Ç–µ–≥–∏")
    print()
    print("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤:")
    print("  ‚Ä¢ " + str(source_dir))
    print("  ‚Ä¢ " + str(target_dir))


if __name__ == '__main__':
    main()

